<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Travel Buddy ‚úàÔ∏è</title>
<style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');

    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: 'Poppins', sans-serif;
    }

    body {
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
        background-size: 400% 400%;
        animation: gradient 15s ease infinite;
        color: #fff;
        padding: 20px;
    }

    @keyframes gradient {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
    }

    .container {
        background: rgba(255, 255, 255, 0.15);
        /* FIX: Vendor prefix comes first */
        -webkit-backdrop-filter: blur(12px); 
        backdrop-filter: blur(12px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        padding: 40px 30px;
        border-radius: 25px;
        width: 100%;
        max-width: 600px;
        text-align: center;
        box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
        transition: transform 0.3s;
    }

    .container:hover {
        transform: translateY(-5px);
    }

    h1 {
        font-size: 2.5em;
        margin-bottom: 10px;
        background: -webkit-linear-gradient(#ffecd2, #fcb69f);
        /* FIX: Added standard property for compatibility */
        -webkit-background-clip: text;
        background-clip: text; 
        -webkit-text-fill-color: transparent;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
    }

    p.subtitle {
        font-size: 0.9em;
        margin-bottom: 25px;
        color: #e0e0e0;
    }

    .input-group {
        position: relative;
        width: 100%;
        margin-bottom: 25px;
    }

    input[type="text"] {
        width: 100%;
        padding: 15px 20px;
        border-radius: 50px;
        border: 2px solid rgba(255,255,255,0.3);
        background: rgba(255,255,255,0.1);
        color: #fff;
        font-size: 1.1em;
        outline: none;
        transition: 0.3s;
    }

    input[type="text"]::placeholder {
        color: rgba(255,255,255,0.7);
    }

    input[type="text"]:focus {
        background: rgba(255,255,255,0.2);
        border-color: #fff;
        box-shadow: 0 0 15px rgba(255,255,255,0.3);
    }

    button {
        padding: 12px 30px;
        border-radius: 50px;
        border: none;
        background: linear-gradient(45deg, #ff512f, #dd2476);
        color: #fff;
        font-weight: 600;
        cursor: pointer;
        font-size: 1.1em;
        box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        transition: 0.3s;
    }

    button:hover {
        transform: scale(1.05);
        box-shadow: 0 6px 20px rgba(0,0,0,0.3);
    }

    /* Result Section Styling */
    .result {
        text-align: left;
        margin-top: 20px;
        display: none; 
        animation: fadeIn 0.5s ease-in-out;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
    }

    .header-section {
        text-align: center;
        margin-bottom: 20px;
        border-bottom: 1px solid rgba(255,255,255,0.2);
        padding-bottom: 15px;
    }

    .header-section h2 {
        font-size: 2.2em;
        color: #fff;
        letter-spacing: 1px;
    }

    .header-section h3 {
        font-size: 1.2em;
        color: #ffd700;
        font-style: italic;
        margin-top: 5px;
    }

    .grid-container {
        display: grid;
        grid-template-columns: 1fr;
        gap: 15px;
    }

    .card {
        background: rgba(0, 0, 0, 0.25);
        padding: 15px;
        border-radius: 12px;
        border-left: 5px solid #dd2476;
    }

    .card-title {
        font-size: 0.85em;
        text-transform: uppercase;
        color: #bbb;
        margin-bottom: 5px;
        font-weight: 700;
        letter-spacing: 0.5px;
    }

    .card-content {
        font-size: 1em;
        color: #fff;
        line-height: 1.4;
    }

    /* Cost Table Style */
    .cost-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 10px;
        margin-top: 5px;
    }
    .cost-item {
        background: rgba(255,255,255,0.1);
        padding: 8px;
        border-radius: 8px;
        text-align: center;
    }
    .cost-label { font-size: 0.7em; color: #ccc; display: block; }
    .cost-val { font-weight: bold; color: #4ade80; font-size: 0.9em; }

    .tags span {
        display: inline-block;
        background: rgba(255,255,255,0.2);
        padding: 4px 10px;
        border-radius: 20px;
        font-size: 0.85em;
        margin-right: 5px;
        margin-bottom: 5px;
    }

    /* Loader */
    .loader {
        border: 4px solid rgba(255,255,255,0.3);
        border-top: 4px solid #fff;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
        margin: 20px auto;
        display: none;
    }

    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }

</style>
</head>
<body>

<div class="container">
    <h1>Travel Buddy ‚úàÔ∏è</h1>
    <p class="subtitle">Discover your next adventure with detailed insights.</p>
    
    <div class="input-group">
        <input type="text" id="cityInput" placeholder="Enter destination (e.g., Goa, Manali)...">
    </div>
    
    <button onclick="getTravelData()">Explore Now</button>

    <div class="loader" id="loader"></div>
    <div class="result" id="result"></div>
</div>

<script>
async function getTravelData() {
    const cityInput = document.getElementById('cityInput');
    const resultDiv = document.getElementById('result');
    const loader = document.getElementById('loader');
    
    const city = cityInput.value.trim();

    if (!city) {
        alert("Please enter a city name!");
        return;
    }

    // UI State: Loading
    resultDiv.style.display = 'none';
    loader.style.display = 'block';

    try {
        const response = await fetch(`https://hhh9cgm40h.execute-api.ap-south-1.amazonaws.com/stage1?city=${city}`);
        const data = await response.json();

        loader.style.display = 'none';
        resultDiv.style.display = 'block';

        if (data.error) {
            resultDiv.innerHTML = `
                <div style="text-align: center; padding: 20px;">
                    <h3 style="color: #ff6b6b;">üòï Oops!</h3>
                    <p>${data.error}</p>
                    <small style="color:#ccc">Try: Manali, Goa, Jaipur, or Ooty</small>
                </div>`;
            return;
        }

        // Handle Cost: Check if it's an object (new format) or string (old format fallback)
        let costHtml = '';
        if (typeof data.estimated_cost === 'object') {
            costHtml = `
                <div class="cost-grid">
                    <div class="cost-item"><span class="cost-label">üè† Stay</span><span class="cost-val">${data.estimated_cost.stay}</span></div>
                    <div class="cost-item"><span class="cost-label">üçï Food</span><span class="cost-val">${data.estimated_cost.food}</span></div>
                    <div class="cost-item"><span class="cost-label">üöó Activity</span><span class="cost-val">${data.estimated_cost.activity}</span></div>
                    <div class="cost-item"><span class="cost-label">üí∞ Total/Day</span><span class="cost-val">${data.estimated_cost.total}</span></div>
                </div>
            `;
        } else {
            costHtml = `<span class="cost-val">${data.estimated_cost}</span>`;
        }

        // Helper to create tags
        const createTags = (arr) => arr.map(item => `<span>${item}</span>`).join('');

        const html = `
            <div class="header-section">
                <h2>${data.city}</h2>
                <h3>"${data.nickname}"</h3>
            </div>

            <div class="grid-container">
                <div class="card">
                    <div class="card-title">üåü Famous For</div>
                    <div class="card-content">${data.famous_for}</div>
                </div>

                <div class="card" style="border-left-color: #4ade80;">
                    <div class="card-title">üí∏ Estimated Cost (Per Person)</div>
                    <div class="card-content">${costHtml}</div>
                </div>

                <div class="card" style="border-left-color: #facc15;">
                    <div class="card-title">üìç Best Places</div>
                    <div class="card-content tags">${createTags(data.best_places)}</div>
                </div>

                <div class="card" style="border-left-color: #60a5fa;">
                    <div class="card-title">üé¢ Activities</div>
                    <div class="card-content tags">${createTags(data.activities)}</div>
                </div>

                <div class="card" style="border-left-color: #f472b6;">
                    <div class="card-title">üç≤ Famous Food</div>
                    <div class="card-content tags">${createTags(data.food)}</div>
                </div>

                <div class="card" style="border-left-color: #a78bfa;">
                    <div class="card-title">üõçÔ∏è Shopping Markets</div>
                    <div class="card-content tags">${createTags(data.market)}</div>
                </div>

                <div class="card" style="border-left-color: #fff;">
                    <div class="card-title">üå§Ô∏è Weather & Timing</div>
                    <div class="card-content">
                        <strong>Best Time:</strong> ${data.best_time}<br>
                        <strong>Climate:</strong> ${data.climate}<br>
                        <hr style="margin: 8px 0; border: 0; border-top: 1px solid rgba(255,255,255,0.2);">
                        <small>‚òÄÔ∏è Summer: ${data.season.summer}</small><br>
                        <small>‚ùÑÔ∏è Winter: ${data.season.winter}</small><br>
                        <small>üåßÔ∏è Monsoon: ${data.season.monsoon}</small>
                    </div>
                </div>
            </div>
        `;

        resultDiv.innerHTML = html;

    } catch (err) {
        loader.style.display = 'none';
        resultDiv.style.display = 'block';
        resultDiv.innerHTML = `<div style="text-align:center; color: #ff6b6b;"><strong>Error:</strong> Unable to fetch data. Check your internet connection.</div>`;
        console.error(err);
    }
}

// Trigger search on Enter key
document.getElementById("cityInput").addEventListener("keyup", function(event) {
    if (event.key === "Enter") {
        getTravelData();
    }
});
</script>

</body>
</html>